
tmpl fac(n: Number): NumberHolder {
    fac_aux(acc = 1, i = 1, n = n) => r
} => r

template fac_aux(acc: Number, i: Number, n: Number): NumberHolder {
    (r: NumberHolder)[acc] - when i > n
    fac_aux(acc = i * acc, i = i + 1, n = n) => r - when i <= n
} => r

(n: N)[?: Number]

n -->> {
    fac(n = @trigger.value) => result
}