# DEPRECATED: Until we have a proper way to handle recursion, this example is not working.

# Templates

tmpl sqrt(n: Number): NumberHolder {
    sqrt_aux(x = n, n = n) => r
} => r

tmpl sqrt_aux(x: Number, n: Number): NumberHolder {
    if x * x <= n:
        (r: NumberHolder)[x]
    else:
        sqrt_aux(x = (x + n / x) / 2, n = n) => r
    /if
} => r

# Entry point

(c: calculate)[?: Number]

c -->> {
    sqrt(n = @trigger.value) => result
}